<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Chlous Quoten</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>ðŸŽ… Chlous Quoten</h1>
    <p class="subtitle">Gib deinen Namen ein, wÃ¤hle deinen Tipp und berechne deinen Gewinn!</p>

    <!-- LOGIN -->
    <div class="login">
      <input type="text" id="username" placeholder="Dein Name" />
      <button id="loginBtn">Anmelden</button>
    </div>

    <!-- WETT-BEREICH -->
    <div id="betSection" class="hidden">
      <div class="login">
        <input type="number" id="betAmount" placeholder="Einsatz in CHF" />
        <button onclick="calculateWinnings()">Gewinn berechnen</button>
      </div>

      <div class="bet-card">
        <p>WÃ¤hle deinen Spieler:</p>
        <div id="betButtons">
          <button class="betOption">Lars Schneider</button>
          <button class="betOption">Yannick Oberli</button>
          <button class="betOption">Fynn Roth</button>
          <button class="betOption">Cedric Buri</button>
          <button class="betOption">Cedric Oberli</button>
          <button class="betOption">Ivan Wittwer</button>
          <button class="betOption">Michael Gugger</button>
          <button class="betOption">NaÃ¯m BÃ¼chi</button>
          <button class="betOption">Florin Suter</button>
          <button class="betOption">Noel Muralt</button>
          <button class="betOption">Elia Dubach</button>
          <button class="betOption">Dominic Hofer</button>
          <button class="betOption">Justin Martinjas</button>
          <button class="betOption">Yannick Hirschi</button>
          <button class="betOption">Luan Richner</button>
          <button class="betOption">Elia DÃ¼bi</button>
        </div>
      </div>

      <div id="result" class="hidden"></div>

      <h2>ðŸ“‹ Alle Tipps</h2>
      <ul id="allBets"></ul>

      <button id="clearBetsBtn" class="adminBtn hidden">Alle Tipps lÃ¶schen</button>
    </div>
  </div>

  <script>
    const loginBtn = document.getElementById("loginBtn");
    const usernameInput = document.getElementById("username");
    const betSection = document.getElementById("betSection");
    const allBets = document.getElementById("allBets");
    const betOptions = document.querySelectorAll(".betOption");
    const result = document.getElementById("result");
    const clearBetsBtn = document.getElementById("clearBetsBtn");
    const betAmountInput = document.getElementById("betAmount");

    let username = "";

    const quotes = {
      "Lars Schneider": 4.66,
      "Yannick Oberli": 4.78,
      "Fynn Roth": 8.95,
      "Cedric Buri": 2.84,
      "Cedric Oberli": 7.70,
      "Ivan Wittwer": 6.95,
      "Michael Gugger": 8.95,
      "NaÃ¯m BÃ¼chi": 8.95,
      "Florin Suter": 38.95,
      "Noel Muralt": 38.95,
      "Elia Dubach": 13.95,
      "Dominic Hofer": 16.45,
      "Justin Martinjas": 18.95,
      "Yannick Hirschi": 28.95,
      "Luan Richner": 23.95,
      "Elia DÃ¼bi": 28.95
    };

    // === LOGIN ===
    loginBtn.addEventListener("click", () => {
      username = usernameInput.value.trim();
      if (!username) return alert("Bitte gib einen Namen ein!");
      localStorage.setItem("username", username);
      document.querySelector(".login").classList.add("hidden");
      betSection.classList.remove("hidden");
      loadBets();
      checkAdmin();
    });

    // === WETTE ABGEBEN ===
    betOptions.forEach((btn) => {
      btn.addEventListener("click", () => {
        const choice = btn.innerText;
        const userBet = { name: username, bet: choice };
        saveBet(userBet);
        result.innerHTML = `<p>âœ… Du hast auf <b>${choice}</b> getippt!</p>`;
        result.classList.remove("hidden");
        loadBets();
      });
    });

    // === SPEICHERN DER TIPP-DATEN ===
    function saveBet(userBet) {
      let bets = JSON.parse(localStorage.getItem("bets") || "[]");
      const existing = bets.find((b) => b.name === userBet.name);
      if (existing) existing.bet = userBet.bet;
      else bets.push(userBet);
      localStorage.setItem("bets", JSON.stringify(bets));
    }

    // === LADEN DER TIPP-LISTE ===
    function loadBets() {
      let bets = JSON.parse(localStorage.getItem("bets") || "[]");
      allBets.innerHTML = "";
      bets.forEach((b) => {
        const quote = quotes[b.bet] || 0;
        const amount = parseFloat(betAmountInput.value) || 0;
        const win = amount ? (quote * amount).toFixed(2) + " CHF" : "â€“";
        const li = document.createElement("li");
        li.innerHTML = `<strong>${b.name}</strong>: ${b.bet} â€“ Gewinn: <span class="win">${win}</span>`;
        allBets.appendChild(li);
      });
    }

    // === ADMIN-FUNKTION ===
    function checkAdmin() {
      if (username.toLowerCase() === "chlous") {
        clearBetsBtn.classList.remove("hidden");
      }
    }

    clearBetsBtn.addEventListener("click", () => {
      if (confirm("Willst du wirklich alle Tipps lÃ¶schen?")) {
        localStorage.removeItem("bets");
        loadBets();
        alert("Alle Tipps wurden gelÃ¶scht!");
      }
    });

    // === AUTOMATISCHER LOGIN BEIM NEULADEN ===
    window.addEventListener("load", () => {
      const savedName = localStorage.getItem("username");
      if (savedName) {
        username = savedName;
        document.querySelector(".login").classList.add("hidden");
        betSection.classList.remove("hidden");
        loadBets();
        checkAdmin();
      }
    });

    // === GEWINN BERECHNEN ===
    function calculateWinnings() {
      loadBets();
    }
  </script>
</body>
</html>
